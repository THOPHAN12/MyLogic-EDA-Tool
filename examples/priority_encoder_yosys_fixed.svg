<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="800" viewBox="0 0 1000 800">
  <defs>
    <style>
      .module-box { fill: #e1f5fe; stroke: #01579b; stroke-width: 2; }
      .port-box { fill: #f3e5f5; stroke: #4a148c; stroke-width: 1; }
      .cell-box { fill: #fff3e0; stroke: #e65100; stroke-width: 1; }
      .connection-line { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .connection-text { font-family: Arial, sans-serif; font-size: 10px; fill: #666; }
      .text { font-family: Arial, sans-serif; font-size: 12px; }
      .title { font-size: 16px; font-weight: bold; }
      .port-text { font-size: 10px; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1000" height="800" fill="#fafafa"/>
  
  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" class="text title" fill="#1976d2">
    Circuit Diagram: priority_encoder
  </text>
  
  <!-- Module Box -->
  <rect x="50" y="60" width="900" height="700" class="module-box" rx="10"/>
  <text x="500" y="85" text-anchor="middle" class="text title" fill="#01579b">
    priority_encoder
  </text>

  <!-- Input Port: in -->
  <rect x="80" y="150" width="120" height="40" class="port-box" fill="#4caf50"/>
  <text x="140" y="165" text-anchor="middle" class="text port-text" fill="white">
    in (input)
  </text>
  <text x="140" y="180" text-anchor="middle" class="text port-text" fill="white">
    bits: 8
  </text>

  <!-- Output Port: out -->
  <rect x="800" y="150" width="120" height="40" class="port-box" fill="#f44336"/>
  <text x="860" y="165" text-anchor="middle" class="text port-text" fill="white">
    out (output)
  </text>
  <text x="860" y="180" text-anchor="middle" class="text port-text" fill="white">
    bits: 3
  </text>

  <!-- Output Port: valid -->
  <rect x="800" y="210" width="120" height="40" class="port-box" fill="#f44336"/>
  <text x="860" y="225" text-anchor="middle" class="text port-text" fill="white">
    valid (output)
  </text>
  <text x="860" y="240" text-anchor="middle" class="text port-text" fill="white">
    bits: 1
  </text>

  <!-- Cell: $mylogic$0 -->
  <rect x="400" y="300" width="150" height="50" class="cell-box"/>
  <text x="475" y="320" text-anchor="middle" class="text" fill="#e65100">
    $mylogic$0
  </text>
  <text x="475" y="335" text-anchor="middle" class="text" fill="#e65100">
    $_MUX_
  </text>

  <!-- Cell: $mylogic$1 -->
  <rect x="400" y="380" width="150" height="50" class="cell-box"/>
  <text x="475" y="400" text-anchor="middle" class="text" fill="#e65100">
    $mylogic$1
  </text>
  <text x="475" y="415" text-anchor="middle" class="text" fill="#e65100">
    $_BUF_
  </text>

  <!-- Cell: $mylogic$2 -->
  <rect x="400" y="460" width="150" height="50" class="cell-box"/>
  <text x="475" y="480" text-anchor="middle" class="text" fill="#e65100">
    $mylogic$2
  </text>
  <text x="475" y="495" text-anchor="middle" class="text" fill="#e65100">
    $_MUX_
  </text>

  <!-- Cell: $mylogic$3 -->
  <rect x="400" y="540" width="150" height="50" class="cell-box"/>
  <text x="475" y="560" text-anchor="middle" class="text" fill="#e65100">
    $mylogic$3
  </text>
  <text x="475" y="575" text-anchor="middle" class="text" fill="#e65100">
    $_BUF_
  </text>

  <!-- Connections -->

  <line x1="140" y1="170" x2="475" y2="325" class="connection-line"/>
  <text x="307" y="247" class="connection-text">
    in → $mylogic$0
  </text>

  <line x1="140" y1="170" x2="475" y2="405" class="connection-line"/>
  <text x="307" y="287" class="connection-text">
    in → $mylogic$1
  </text>

  <line x1="140" y1="170" x2="475" y2="485" class="connection-line"/>
  <text x="307" y="327" class="connection-text">
    in → $mylogic$2
  </text>

  <line x1="140" y1="170" x2="475" y2="565" class="connection-line"/>
  <text x="307" y="367" class="connection-text">
    in → $mylogic$3
  </text>

  <line x1="475" y1="325" x2="860" y2="170" class="connection-line"/>
  <text x="667" y="247" class="connection-text">
    $mylogic$0 → out
  </text>

  <line x1="475" y1="325" x2="860" y2="230" class="connection-line"/>
  <text x="667" y="277" class="connection-text">
    $mylogic$0 → valid
  </text>

  <line x1="475" y1="405" x2="860" y2="170" class="connection-line"/>
  <text x="667" y="287" class="connection-text">
    $mylogic$1 → out
  </text>

  <line x1="475" y1="405" x2="860" y2="230" class="connection-line"/>
  <text x="667" y="317" class="connection-text">
    $mylogic$1 → valid
  </text>

  <line x1="475" y1="485" x2="860" y2="170" class="connection-line"/>
  <text x="667" y="327" class="connection-text">
    $mylogic$2 → out
  </text>

  <line x1="475" y1="485" x2="860" y2="230" class="connection-line"/>
  <text x="667" y="357" class="connection-text">
    $mylogic$2 → valid
  </text>

  <line x1="475" y1="565" x2="860" y2="170" class="connection-line"/>
  <text x="667" y="367" class="connection-text">
    $mylogic$3 → out
  </text>

  <line x1="475" y1="565" x2="860" y2="230" class="connection-line"/>
  <text x="667" y="397" class="connection-text">
    $mylogic$3 → valid
  </text>

  <!-- Netnames -->
  <text x="70" y="480" class="text" fill="#1976d2">Netnames:</text>

  <text x="70" y="500" class="text port-text" fill="#666">
    in: [1, 2, 3, 4, 5, 6, 7, 8]
  </text>

  <text x="70" y="515" class="text port-text" fill="#666">
    out: [9, 10, 11]
  </text>

  <text x="70" y="530" class="text port-text" fill="#666">
    valid: [12]
  </text>

</svg>